<!DOCTYPE html>
<html>
<head>
<title>ExternalInterface</title>
<!--<script defer="defer">
initCanvas(document.getElementById('cv'));
</script>-->
<script>
document.createElement('canvas');

var CanvasRenderingContext2d = {
	init: function (id) {
		document.title = 'init';
	}
};

function initCanvas(element) {
	element.innerHTML = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"\
width="200" height="200" id="cv-swf" style="" class="">\
            <param name="allowScriptAccess" value="always">\
            <param name="movie" value="../excanvas/FlashCanvas.swf">\
		<param name="quality" value="high"></object>';
}

</script>
</head>
<body>

<canvas id="cv" width="200" height="200"></canvas>

<script>
var isReady = false;
function bindReady(){
	// ensure firing before onload,
	// maybe late but safe also for iframes
	document.attachEvent("onreadystatechange", function(){
		if ( document.readyState === "complete" ) {
			document.detachEvent( "onreadystatechange", arguments.callee );
			initialize();
			isReady = true;
		}
	});

	// If IE and not an iframe
	// continually check to see if the document is ready
	if ( document.documentElement.doScroll && window == window.top ) (function(){
		if ( isReady ) return;

		try {
			// If IE is used, use the trick by Diego Perini
			// http://javascript.nwbox.com/IEContentLoaded/
			document.documentElement.doScroll("left");
		} catch( error ) {
			setTimeout( arguments.callee, 0 );
			return;
		}

		// and execute any waiting functions
		initialize();
		isReady = true;
	})();
}
bindReady();

window.onload = function () {
document.title = 'load';
}
</script>
</body>
</html>