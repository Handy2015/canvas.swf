<!DOCTYPE html>

<html>
  <head>
    <title>Histogram 
 | Processing.js</title>

    <!--[if IE]><script type="text/javascript" src="../bin/flashcanvas.js"></script><![endif]-->
    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="loader.js"></script>
  </head>
  <body>
    <div id="container">
      <script type="application/processing">
size(200, 200);
colorMode(RGB, width);

int[] hist = new int[width];

// Load an image from the data directory
// Load a different image by modifying the comments
PImage a;
a = loadImage("cdi01_g.jpg");
image(a, 0, 0);

// Calculate the histogram
for (int i=0; i<width; i++) {
  for (int j=0; j<height; j++) {
    hist[int(red(get(i, j)))]++; 
  }
} 

// Find the largest value in the histogram
float maxval = 0;
for (int i=0; i<width; i++) {
  if(hist[i] > maxval) {
    maxval = hist[i];
  }  
}

// Normalize the histogram to values between 0 and "height"
for (int i=0; i<width; i++) {
  hist[i] = int(hist[i]/maxval * height);
}

// Draw half of the histogram (skip every second value)
stroke(width);
for (int i=0; i<width; i+=2) {
  line(i, height, i, height-hist[i]);
}

     </script>
      <canvas width="200" height="200" style="border: 10px solid #444;"></canvas>
    </div>
  </body>
</html>